# -*- coding: utf-8 -*-
"""WiseTree.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1dSukx08ewmiRhE3XU91_f6YA6IbwjQC5
"""

!pip install pyTelegramBotAPI
!pip install constants
!pip install schedule

import os
import schedule 
from multiprocessing import * 
import time 
import telebot
import datetime
import pytz
import random
import constants
import numpy
from telebot import types

token='5775993210:AAHb6Ai5HykFVNZZGyFCEL8hji9faf9XqjI'
bot=telebot.TeleBot(token)

@bot.message_handler(commands=['start'])
def start(message):
  mess=f'–ü—Ä–∏–≤–µ—Ç, <b>{message.from_user.first_name}</b>. –í—ã—Å–ª—É—à–∞–π –º–æ–π —Ä–∞—Å—Å–∫–∞–∑.'
  bot.send_message(message.chat.id, mess, parse_mode='html')
  bot.send_photo(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/wise_tree.jpg','rb'))
  bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/Lightsideintro.ogg','rb'))
  markup=types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
  itema=types.KeyboardButton('–î–∞ ‚úÖ')
  itemb=types.KeyboardButton('–ù–µ —Ö–æ—á—É ‚ùå')
  markup.add(itema,itemb)
  bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/Hoches li ti.ogg','rb'), reply_markup=markup)

@bot.message_handler(content_types=['text'])
def message_reply(message): 
  advices=['/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/advice/advice1.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/advice/advice2.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/advice/advice3.ogg', '/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/advice/advice4.ogg']
  advice=random.choice(advices)
  angry_mn=['/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree1.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree2.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree3.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree4.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree5.ogg','/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angrysliv/anrytree6.ogg']
  angry=random.choice(angry_mn)
  global delta2
  global zvanie
  zvanie=['–ì–ª—É–ø–æ–µ —Å–µ–º—è', '–°–º—ã—à–ª–µ–Ω–æ–µ —Å–µ–º—è','–î—É–º–∞—é—â–∏–π —Å–æ—Ä–Ω—è–∫','–£–º–Ω—ã–π —Ä–æ—Å—Ç–æ–∫','–ó–µ–ª–µ–Ω—ã–π –ª–∏—Å—Ç–æ–∫','–ú—É–¥—Ä–æ–µ –¥—Ä–µ–≤–æ','–ë–µ—à–µ–Ω–æ–µ –¥–µ—Ä–µ–≤–æ','–î–µ—Ä–µ–≤–æ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –ø—Å–∏—Ö–æ–ø–∞—Ç','–î—Ä–µ–≤–æ –ì–æ—Å–ª–∏–Ω–≥']
  
  if message.text=='–î–∞ ‚úÖ' or message.text== '–Ø –ø–µ—Ä–µ–¥—É–º–∞–ª, —Ö–æ—á—É –Ω–∞—á–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ üòå ':

    if message.text=='–Ø –ø–µ—Ä–µ–¥—É–º–∞–ª, —Ö–æ—á—É –Ω–∞—á–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ üòå ':
      bot.send_message(message.chat.id,'*–î–µ—Ä–µ–≤–æ —É–ª—ã–±–∞–µ—Ç—Å—è*')
    bot.send_photo(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/drevo_light.jpg','rb'))
    bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/ligtside_start.ogg','rb'))
    bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/helpbot.ogg','rb'))
    markup=types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    itema=types.KeyboardButton("–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä")
    itemb=types.KeyboardButton("–°–æ–≤–µ—Ç –æ—Ç –¥–µ—Ä–µ–≤–∞ ü§ì")
    itemd=types.KeyboardButton("–ù–∞—á–∞—Ç—å –æ—Ç—Å—á–µ—Ç ‚è≤Ô∏è")
    markup.add(itema,itemb,itemd)
    bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/predosterezhenie.ogg','rb'), reply_markup=markup)
    
    global z
    z=False
    if z==False and message.text=='–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä': 
      bot.send_message(message.chat.id, f'–î—è—Ç–µ–ª, —Å–Ω–∞—á–∞–ª–∞ —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—Å—Ç–∏.')

  elif message.text=='–ù–∞—á–∞—Ç—å –æ—Ç—Å—á–µ—Ç ‚è≤Ô∏è':
    global start_watch
    start_watch = datetime.datetime.now(pytz.timezone('Europe/Moscow'))
    z=True
    #bot.send_message(message.chat.id, f'–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç {delta2.seconds} —Å–µ–∫—É–Ω–¥')
    markup=types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    itema=types.KeyboardButton("–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä")
    itemb=types.KeyboardButton("–°–æ–≤–µ—Ç –æ—Ç –¥–µ—Ä–µ–≤–∞ ü§ì")
    itemd=types.KeyboardButton("–Ø —Å–ª–∏–ª—Å—è üëé")
    markup.add(itema,itemb,itemd)
    bot.send_message(message.chat.id, f'–ù–∞ —á–∞—Å–∞—Ö {start_watch.strftime("%H:%M:%S")} –ø–æ –ú–æ—Å–∫–≤–µ, {start_watch.strftime("%d-%m-%Y")}. –Ø –Ω–∞—á–∞–ª –æ—Ç—Å—á–µ—Ç.', reply_markup=markup)

  elif z==False and message.text=='–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä': 
    bot.send_message(message.chat.id, f'–î—è—Ç–µ–ª, —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏ –æ—Ç—Å—á–µ—Ç.')
  elif z==True and message.text=='–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä':
    bot.send_photo(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/drevo_light.jpg','rb'))
    stop_watch2 = datetime.datetime.now(pytz.timezone('Europe/Moscow'))
    delta2 = stop_watch2 - start_watch
    d2=delta2.total_seconds()
    d2el=int(d2//86400)
    if d2el <=1:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[0]}', parse_mode='html')
    if 1< d2el <=3:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[1]}', parse_mode='html')
    if 3< d2el <=7:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[2]}', parse_mode='html')
    if 7< d2el <=10:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[3]}', parse_mode='html') 
    if 10< d2el <=15:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[4]}', parse_mode='html')
    if 15< d2el <=30:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[5]}', parse_mode='html')
    if 30< d2el <=60:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[6]}', parse_mode='html')
    if 60< d2el <=90:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[7]}', parse_mode='html')
    if 90< d2el:
      bot.send_message(message.chat.id, '<b>–í–æ—Ç –æ–Ω, —Ç–≤–æ–π —Å—Ç–∞—Ç—É—Å. \n–ö–æ–ª-–≤–æ –¥–Ω–µ–π:</b>'f'\n{d2el}<b>\n–ó–≤–∞–Ω–∏–µ:</b> {zvanie[8]}', parse_mode='html')

  elif message.text=='–Ø —Å–ª–∏–ª—Å—è üëé':
    z=False
    stop_watch = datetime.datetime.now(pytz.timezone('Europe/Moscow'))
    delta = stop_watch - start_watch
    d1=delta.total_seconds()
    d1elo=int(d1//86400)
    markup=types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    itema=types.KeyboardButton("–ú–æ–π —Å—Ç–∞—Ç—É—Å üìä")
    itemb=types.KeyboardButton("–°–æ–≤–µ—Ç –æ—Ç –¥–µ—Ä–µ–≤–∞ ü§ì")
    itemd=types.KeyboardButton("–ù–∞—á–∞—Ç—å –æ—Ç—Å—á–µ—Ç ‚è≤Ô∏è")
    markup.add(itema,itemb,itemd)
    bot.send_photo(message.chat.id,open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/drevo_dark.jpg','rb'),reply_markup=markup)
    bot.send_voice(message.chat.id, open(angry,'rb'))
    if d1elo % 10 == 1 and d1elo % 100 != 11:
      bot.send_message(message.chat.id, f'–¢–æ–≥–æ —Ä–æ—Ç, —Ç—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª—Å—è –≤—Å–µ–≥–æ {d1elo} –¥–µ–Ω—å?!')
    elif 2 <= d1elo % 10 <= 4 and (d1elo % 100 < 10 or d1elo % 100 >= 20):
      bot.send_message(message.chat.id, f'–¢–æ–≥–æ —Ä–æ—Ç, —Ç—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª—Å—è –≤—Å–µ–≥–æ {d1elo} –¥–Ω—è?!')
    else:
      bot.send_message(message.chat.id, f'–¢–æ–≥–æ —Ä–æ—Ç, —Ç—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª—Å—è –≤—Å–µ–≥–æ {d1elo} –¥–Ω–µ–π?!')
  

  elif message.text=='–ù–µ —Ö–æ—á—É ‚ùå':
      bot.send_photo(message.chat.id,open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/drevo_dark.jpg','rb'))
      markup=types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
      itema=types.KeyboardButton("–Ø –ø–µ—Ä–µ–¥—É–º–∞–ª, —Ö–æ—á—É –Ω–∞—á–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ üòå ")
      markup.add(itema)
      bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/angry tree.ogg','rb'), reply_markup=markup)
  elif message.text=='–°–æ–≤–µ—Ç –æ—Ç –¥–µ—Ä–µ–≤–∞ ü§ì':
      bot.send_voice(message.chat.id, open(advice,'rb'))

@bot.message_handler(content_types=['photo'])
def get_user_photo(message):
  bot.send_voice(message.chat.id, open('/content/drive/MyDrive/Colab Notebooks/WiseTreeBot/losing_it.ogg','rb'))

bot.polling(none_stop=True)